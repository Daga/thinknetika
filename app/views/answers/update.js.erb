<% if @answer.errors.present? %>
  <% @answer.errors.full_messages.each do |message| %>
    $('.answer-errors').html('<%= j message %>');
  <% end %>
<% else %>
  $('.answers li#answer_<%= @answer.id %>').replaceWith('<%= j render @answer %>');
  $('.edit-answer-link').click(function(e) {
    e.preventDefault();
    $(this).hide();
    answer_id = $(this).data('answerId');
    $('form#edit-answer-' + answer_id).show();
  });
  $('input.set-best-answer').on('change', function(e){
    answer_id = $(this).data('answerId');
    question_id = $(this).data('questionId');
    $.ajax({
      type: "PATCH",
      url: "/questions/" + question_id + "/answers/" + answer_id + "/set_best",
      dataType: "json",
      data: {
        _method: "PUT",
        id: answer_id,
        question_id: question_id,
      },
      success: function(data){
        $('.answers p.notice').html(data.message)
      },
      error: function(){
        $('.answers p.notice').html('Something is wrong.')
      }
    });
  });
<% end %>